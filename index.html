<!DOCTYPE html>

<meta name="robots" content="noindex">
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>ABC2Book</title>
  <link href="abcjs-audio.css" media="all" rel="stylesheet" type="text/css" />
	
</head>
<body>
 <a id="topofpage" ></a>
 
 <div id="songlistpicker" class="overlay" style="z-index: 9999; display: none; position: fixed ; top:120px; left: 20px;"  ></div>
 <div id="chathistory"  class="overlay" style="z-index: 9999; display: none; position: fixed ; top:120px; left: 20px;"  ></div>
 
<div id="review" style="margin-top: 3em; display: none" >
  <input type="hidden" id="reviewplaycounter" value="0" />
  <input type="hidden" id="reviewindex" value="0" />
  <div id="reviewlistwrapper" class="overlay" >
    <input type="text" id="reviewsearchinput" />
    <div id="reviewlist"  ></div>
  </div>
  <div id="reviewmusic"  ></div>
</div>  
 
<div id="edit" style="display: none" >
  <div style="position: fixed; top: 2em; left: 0; height: 1em"  id="editoraudio"></div>
  
  
  <div style="position: fixed; top: 2em; right: 0; height: 1em"  id="editorbuttons">
    
    <button onClick="submitSaveSetting()" style="margin-right: 0.2em" id="savesettingbutton" ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Save Setting</title><path fill="none" d="M0 0h24v24H0z"/><path d="M7 19v-6h10v6h2V7.828L16.172 5H5v14h2zM4 3h13l4 4v13a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm5 12v4h6v-4H9z"/></svg></button>
    
    <button  onClick="submitNewSetting()" style="margin-right: 0.2em" id="newsettingbutton" ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>New Setting</title><path fill="none" d="M0 0h24v24H0z"/><path d="M2 18h10v2H2v-2zm0-7h20v2H2v-2zm0-7h20v2H2V4zm16 14v-3h2v3h3v2h-3v3h-2v-3h-3v-2h3z"/></svg></button>
    
    <button  onClick="submitNewTune()" style="margin-right: 0.2em" id="newtunebutton" ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>New Tune</title><path fill="none" d="M0 0h24v24H0z"/><path d="M15 4H5v16h14V8h-4V4zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008V2.992zM11 11V8h2v3h3v2h-3v3h-2v-3H8v-2h3z"/></svg></button>
  </div>
  <textarea spellcheck="false" style="position: fixed; top: 4em; left: 0; width: 100%; height: 7em; " id="editor" ></textarea>
  <div id="editormusic" style="margin-top: 10em;  width: 100%"  ></div>
  <div style="font-size: 0.6em; color: red;" id="editorwarnings" ></div>
  <input type='hidden' id="editorsongnumber" />
  
</div>    
  
<div id="audio"></div>
<input type="hidden" id="forcestop" value="" />
<input type="hidden" id="reviewforcestop" value="" />

<input type="hidden" id="reviewlist" value="" />
<div id="controls"  style="width: 100%; z-index: 3;  background-image: linear-gradient(to right , #d8d5f9, #6254f5);
  position: fixed; top: 0; left: 0; height: 2em; padding: 0em" >
  <span id="waiting" ><img src="waiting.gif" style="position: fixed; top: 0; left: 0; height: 1.8em; opacity: 1"  ></span>
  
  <a onClick="showContentSection('home')" href="#" style="float: left;  margin-right: 0.2em" >
    <button id="homebutton" style="z-index: 10"  ><img style="height: 1.5em; opacity: 0.9"  src="home.png"   ></button>
    
  </a>
<!--
  <button onClick="parseAbc()"  >TEST</button>
-->


  <div id="reviewbuttons" style="display: none; width: 100%" >
    <button onClick="showReviewList()" style="float: left" id="reviewlistbutton" ><svg role="img"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Review List</title><path fill="none" d="M0 0h24v24H0z"/><path d="M2 18h10v2H2v-2zm0-7h14v2H2v-2zm0-7h20v2H2V4zm17 11.17V9h5v2h-3v7a3 3 0 1 1-2-2.83z"/></svg></button>
    <button  onClick="previousReviewItem()" style="margin-left: 2em; float: none" id="reviewlistpreviousbutton" ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Previous</title><path fill="none" d="M0 0h24v24H0z"/><path d="M8 12l6-6v12z"/></svg></button>
    <button  onClick="nextReviewItem()"style="margin-left: 0.5em; float: none" id="reviewlistnextbutton" ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Next</title><path fill="none" d="M0 0h24v24H0z"/><path d="M16 12l-6 6V6z"/></svg></button>
    
    <button  onClick="startReview()" style="margin-right: 0.2em; float: right" id="reviewplayallbutton" ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Start Review</title><path fill="none" d="M0 0h24v24H0z"/><path d="M16.394 12L10 7.737v8.526L16.394 12zm2.982.416L8.777 19.482A.5.5 0 0 1 8 19.066V4.934a.5.5 0 0 1 .777-.416l10.599 7.066a.5.5 0 0 1 0 .832z"/></svg></button>
    
    <button onClick="reviewStopPlaying()"   style="margin-right: 0.2em; display: none; float: right" id="reviewstopallbutton" ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Stop Review</title><path fill="none" d="M0 0h24v24H0z"/><path d="M7 7v10h10V7H7zM6 5h12a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1z"/></svg></button>
    
    
  </div>
  
  <div style="position: relative; width: 100%; " >
    <div id="buttonblock" style="float: left;" >
      <button id="indexbutton" class="headerbutton" onClick="showContentSection('indexes')"   ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Show Index</title><path fill="none" d="M0 0h24v24H0z"/><path d="M20 22H4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1h16a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1zm-1-2V4H5v16h14zM8 7h8v2H8V7zm0 4h8v2H8v-2zm0 4h8v2H8v-2z"/></svg></button>
     
     <button id="cheatsheetbutton" class="headerbutton" onClick="showContentSection('cheatsheet_music_container')"   ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Cheat Sheet</title><path fill="none" d="M0 0h24v24H0z"/><path d="M16 8v2h-3v4.5a2.5 2.5 0 1 1-2-2.45V8h4V4H5v16h14V8h-3zM3 2.992C3 2.444 3.447 2 3.999 2H16l5 5v13.993A1 1 0 0 1 20.007 22H3.993A1 1 0 0 1 3 21.008V2.992z"/></svg></button>
      
      
       
   
<button   id="reviewbutton"  class="headerbutton" style="float: left; margin-right: 0.2em;"  >
  <svg role="img" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 463 463" height="24px" width="24px" style="enable-background:new 0 0 463 463;" xml:space="preserve">
   <title>Review</title>
<g>
	<path d="M151.245,222.446C148.054,237.039,135.036,248,119.5,248c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5
		c23.774,0,43.522-17.557,46.966-40.386c14.556-1.574,27.993-8.06,38.395-18.677c2.899-2.959,2.85-7.708-0.109-10.606
		c-2.958-2.897-7.707-2.851-10.606,0.108C184.947,202.829,172.643,208,159.5,208c-26.743,0-48.5-21.757-48.5-48.5
		c0-4.143-3.358-7.5-7.5-7.5s-7.5,3.357-7.5,7.5C96,191.715,120.119,218.384,151.245,222.446z"/>
	<path d="M183,287.5c0-4.143-3.358-7.5-7.5-7.5c-35.014,0-63.5,28.486-63.5,63.5c0,0.362,0.013,0.725,0.019,1.088
		C109.23,344.212,106.39,344,103.5,344c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c26.743,0,48.5,21.757,48.5,48.5
		c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5c0-26.611-16.462-49.437-39.731-58.867c-0.178-1.699-0.269-3.418-0.269-5.133
		c0-26.743,21.757-48.5,48.5-48.5C179.642,295,183,291.643,183,287.5z"/>
	<path d="M439,223.5c0-17.075-6.82-33.256-18.875-45.156c1.909-6.108,2.875-12.426,2.875-18.844
		c0-30.874-22.152-56.659-51.394-62.329C373.841,91.6,375,85.628,375,79.5c0-19.557-11.883-36.387-28.806-43.661
		C317.999,13.383,287.162,0,263.5,0c-13.153,0-24.817,6.468-32,16.384C224.317,6.468,212.653,0,199.5,0
		c-23.662,0-54.499,13.383-82.694,35.839C99.883,43.113,88,59.943,88,79.5c0,6.128,1.159,12.1,3.394,17.671
		C62.152,102.841,40,128.626,40,159.5c0,6.418,0.965,12.735,2.875,18.844C30.82,190.244,24,206.425,24,223.5
		c0,13.348,4.149,25.741,11.213,35.975C27.872,270.087,24,282.466,24,295.5c0,23.088,12.587,44.242,32.516,55.396
		C56.173,353.748,56,356.626,56,359.5c0,31.144,20.315,58.679,49.79,68.063C118.611,449.505,141.965,463,167.5,463
		c27.995,0,52.269-16.181,64-39.674c11.731,23.493,36.005,39.674,64,39.674c25.535,0,48.889-13.495,61.71-35.437
		c29.475-9.385,49.79-36.92,49.79-68.063c0-2.874-0.173-5.752-0.516-8.604C426.413,339.742,439,318.588,439,295.5
		c0-13.034-3.872-25.413-11.213-36.025C434.851,249.241,439,236.848,439,223.5z M167.5,448c-21.029,0-40.191-11.594-50.009-30.256
		c-0.973-1.849-2.671-3.208-4.688-3.751C88.19,407.369,71,384.961,71,359.5c0-3.81,0.384-7.626,1.141-11.344
		c0.702-3.447-1.087-6.92-4.302-8.35C50.32,332.018,39,314.626,39,295.5c0-8.699,2.256-17.014,6.561-24.379
		C56.757,280.992,71.436,287,87.5,287c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5C60.757,272,39,250.243,39,223.5
		c0-14.396,6.352-27.964,17.428-37.221c2.5-2.09,3.365-5.555,2.14-8.574C56.2,171.869,55,165.744,55,159.5
		c0-26.743,21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5
		c0-33.642-26.302-61.243-59.421-63.355C104.577,91.127,103,85.421,103,79.5c0-13.369,8.116-24.875,19.678-29.859
		c0.447-0.133,0.885-0.307,1.308-0.527C127.568,47.752,131.447,47,135.5,47c12.557,0,23.767,7.021,29.256,18.325
		c1.81,3.727,6.298,5.281,10.023,3.47c3.726-1.809,5.28-6.296,3.47-10.022c-6.266-12.903-18.125-22.177-31.782-25.462
		C165.609,21.631,184.454,15,199.5,15c13.509,0,24.5,10.99,24.5,24.5v97.051c-6.739-5.346-15.25-8.551-24.5-8.551
		c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c13.509,0,24.5,10.99,24.5,24.5v180.279c-9.325-12.031-22.471-21.111-37.935-25.266
		c-3.999-1.071-8.114,1.297-9.189,5.297c-1.075,4.001,1.297,8.115,5.297,9.189C206.8,343.616,224,366.027,224,391.5
		C224,422.654,198.654,448,167.5,448z M395.161,339.807c-3.215,1.43-5.004,4.902-4.302,8.35c0.757,3.718,1.141,7.534,1.141,11.344
		c0,25.461-17.19,47.869-41.803,54.493c-2.017,0.543-3.716,1.902-4.688,3.751C335.691,436.406,316.529,448,295.5,448
		c-31.154,0-56.5-25.346-56.5-56.5c0-2.109-0.098-4.2-0.281-6.271c0.178-0.641,0.281-1.314,0.281-2.012V135.5
		c0-13.51,10.991-24.5,24.5-24.5c4.142,0,7.5-3.357,7.5-7.5s-3.358-7.5-7.5-7.5c-9.25,0-17.761,3.205-24.5,8.551V39.5
		c0-13.51,10.991-24.5,24.5-24.5c15.046,0,33.891,6.631,53.033,18.311c-13.657,3.284-25.516,12.559-31.782,25.462
		c-1.81,3.727-0.256,8.214,3.47,10.022c3.726,1.81,8.213,0.257,10.023-3.47C303.733,54.021,314.943,47,327.5,47
		c4.053,0,7.933,0.752,11.514,2.114c0.422,0.22,0.86,0.393,1.305,0.526C351.883,54.624,360,66.13,360,79.5
		c0,5.921-1.577,11.627-4.579,16.645C322.302,98.257,296,125.858,296,159.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5
		c0-26.743,21.757-48.5,48.5-48.5s48.5,21.757,48.5,48.5c0,6.244-1.2,12.369-3.567,18.205c-1.225,3.02-0.36,6.484,2.14,8.574
		C417.648,195.536,424,209.104,424,223.5c0,26.743-21.757,48.5-48.5,48.5c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5
		c16.064,0,30.743-6.008,41.939-15.879c4.306,7.365,6.561,15.68,6.561,24.379C424,314.626,412.68,332.018,395.161,339.807z"/>
	<path d="M359.5,240c-15.536,0-28.554-10.961-31.745-25.554C358.881,210.384,383,183.715,383,151.5c0-4.143-3.358-7.5-7.5-7.5
		s-7.5,3.357-7.5,7.5c0,26.743-21.757,48.5-48.5,48.5c-13.143,0-25.447-5.171-34.646-14.561c-2.898-2.958-7.647-3.007-10.606-0.108
		s-3.008,7.647-0.109,10.606c10.402,10.617,23.839,17.103,38.395,18.677C315.978,237.443,335.726,255,359.5,255
		c4.142,0,7.5-3.357,7.5-7.5S363.642,240,359.5,240z"/>
	<path d="M335.5,328c-2.89,0-5.73,0.212-8.519,0.588c0.006-0.363,0.019-0.726,0.019-1.088c0-35.014-28.486-63.5-63.5-63.5
		c-4.142,0-7.5,3.357-7.5,7.5s3.358,7.5,7.5,7.5c26.743,0,48.5,21.757,48.5,48.5c0,1.714-0.091,3.434-0.269,5.133
		C288.462,342.063,272,364.889,272,391.5c0,4.143,3.358,7.5,7.5,7.5s7.5-3.357,7.5-7.5c0-26.743,21.757-48.5,48.5-48.5
		c4.142,0,7.5-3.357,7.5-7.5S339.642,328,335.5,328z"/>
</g>
</svg></button>

<button   id="moremenubutton" >
<svg style="position: relative; top: 10px" role="image" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 32.055 32.055" width="24" height="24" style="enable-background:new 0 0 32.055 32.055;" xml:space="preserve"><title>Show More</title>
<g>
	<path d="M3.968,12.061C1.775,12.061,0,13.835,0,16.027c0,2.192,1.773,3.967,3.968,3.967c2.189,0,3.966-1.772,3.966-3.967
		C7.934,13.835,6.157,12.061,3.968,12.061z M16.233,12.061c-2.188,0-3.968,1.773-3.968,3.965c0,2.192,1.778,3.967,3.968,3.967
		s3.97-1.772,3.97-3.967C20.201,13.835,18.423,12.061,16.233,12.061z M28.09,12.061c-2.192,0-3.969,1.774-3.969,3.967
		c0,2.19,1.774,3.965,3.969,3.965c2.188,0,3.965-1.772,3.965-3.965S30.278,12.061,28.09,12.061z"/>
</g>
</svg></button> 
    <div style="display: none" id="moremenu" class="overlay" >
      
      <button style="margin-right: 0.2em; float: left" id="editsonglistbutton" ><svg  role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Edit Songlist</title><path fill="none" d="M0 0h24v24H0z"/><path d="M15.728 9.686l-1.414-1.414L5 17.586V19h1.414l9.314-9.314zm1.414-1.414l1.414-1.414-1.414-1.414-1.414 1.414 1.414 1.414zM7.242 21H3v-4.243L16.435 3.322a1 1 0 0 1 1.414 0l2.829 2.829a1 1 0 0 1 0 1.414L7.243 21z"/></svg></button>
    
      <button style="margin-right: 0.2em; float: left" id="downloadbutton"  ><svg  role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Save/Download</title><path fill="none" d="M0 0h24v24H0z"/><path d="M7 19v-6h10v6h2V7.828L16.172 5H5v14h2zM4 3h13l4 4v13a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1zm5 12v4h6v-4H9z"/></svg></button>
    
    <button style="margin-right: 1em; float: left"  id="songlistpickerbutton" ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Load Songbook</title><path fill="none" d="M0 0h24v24H0z"/><path d="M3 21a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h7.414l2 2H20a1 1 0 0 1 1 1v3h-2V7h-7.414l-2-2H4v11.998L5.5 11h17l-2.31 9.243a1 1 0 0 1-.97.757H3zm16.938-8H7.062l-1.5 6h12.876l1.5-6z"/></svg></button>
      
      <button id="printbutton" style="margin-right: 0.2em; float: left"   onClick="printPage(); return false"  ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Print</title><path fill="none" d="M0 0h24v24H0z"/><path d="M6 19H3a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h3V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v4h3a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1h-3v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-2zm0-2v-1a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v1h2V9H4v8h2zM8 4v3h8V4H8zm0 13v3h8v-3H8zm-3-7h3v2H5v-2z"/></svg></button>
       
       <button id="helpbutton" style="float: left"  onClick="showContentSection('help')"   ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><title>Help</title><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm-1-5h2v2h-2v-2zm2-1.645V14h-2v-1.5a1 1 0 0 1 1-1 1.5 1.5 0 1 0-1.471-1.794l-1.962-.393A3.501 3.501 0 1 1 13 13.355z"/></svg></button>
      
    </div>

    </div>
    <div class="playblock"  style="float: right">
        <svg version="1.1" style="float: left; margin-top: 0.3em"  height="15px" width="15px" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
           viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
        <g>
          <g>
            <g>
              <path d="M247.468,332.8v-25.6h34.133v25.6c0,4.71,3.814,8.533,8.533,8.533c4.719,0,8.533-3.823,8.533-8.533V51.2h25.6
                c4.719,0,8.533-3.823,8.533-8.533c0-4.71-3.814-8.533-8.533-8.533H204.801c-4.71,0-8.533,3.823-8.533,8.533
                c0,4.71,3.823,8.533,8.533,8.533h25.6v281.6c0,4.71,3.823,8.533,8.533,8.533C243.645,341.333,247.468,337.51,247.468,332.8z
                 M247.468,51.2h34.133v34.133h-34.133V51.2z M247.468,102.4h34.133v34.133h-34.133V102.4z M247.468,153.6h34.133v34.133h-34.133
                V153.6z M247.468,204.8h34.133v34.133h-34.133V204.8z M247.468,256h34.133v34.133h-34.133V256z"/>
              <path d="M366.849,41.455C363.359,17.05,345.848,0,324.268,0H204.801c-20.719,0-36.992,15.65-42.564,41.378L131.32,243.191
                l-24.602-32.913c2.645-4.036,4.215-8.841,4.215-14.012c0-14.114-11.486-25.6-25.6-25.6c-2.645,0-5.137,0.521-7.535,1.263
                l-19.797-26.146c-2.842-3.755-8.192-4.506-11.955-1.655c-3.755,2.85-4.497,8.201-1.647,11.955l19.661,25.975
                c-2.731,4.07-4.326,8.951-4.326,14.208c0,14.114,11.486,25.6,25.6,25.6c2.714,0,5.291-0.538,7.748-1.331L196.122,358.4h-66.295
                l7.919-47.744c0.768-4.651-2.372-9.045-7.023-9.813c-4.685-0.777-9.045,2.372-9.813,7.023L94.388,467.908
                c-1.894,11.204,0.973,21.99,8.064,30.379c7.364,8.721,18.475,13.713,30.481,13.713h263.868c11.648,0,22.519-5.052,29.815-13.867
                c7.066-8.525,9.941-19.601,7.945-30.14L366.849,41.455z M85.334,204.8c-4.702,0-8.533-3.831-8.533-8.533
                c0-4.702,3.831-8.533,8.533-8.533c4.702,0,8.533,3.831,8.533,8.533C93.867,200.969,90.036,204.8,85.334,204.8z M413.475,487.253
                c-4.053,4.881-10.12,7.68-16.674,7.68H132.933c-6.972,0-13.329-2.79-17.442-7.663c-3.797-4.489-5.316-10.351-4.275-16.538
                l15.787-95.266h81.886l39.851,53.325c-0.802,1.98-1.271,4.139-1.271,6.409c0,9.412,7.654,17.067,17.067,17.067
                s17.067-7.654,17.067-17.067s-7.654-17.067-17.067-17.067c-0.785,0-1.527,0.128-2.287,0.23L145.639,262.357l33.365-217.882
                c1.792-8.235,7.893-27.409,25.796-27.409h119.467c15.104,0,23.782,13.466,25.711,26.94L399.881,358.4H252.135
                c-4.71,0-8.533,3.823-8.533,8.533s3.823,8.533,8.533,8.533h150.468l15.147,95.454
                C418.842,476.698,417.281,482.645,413.475,487.253z"/>
              <path d="M460.801,341.333c-4.719,0-8.533,3.823-8.533,8.533v8.533h-12.442c-4.719,0-8.533,3.823-8.533,8.533
                s3.814,8.533,8.533,8.533h12.442V384c0,4.71,3.814,8.533,8.533,8.533s8.533-3.823,8.533-8.533v-34.133
                C469.334,345.156,465.52,341.333,460.801,341.333z"/>
            </g>
          </g>
        </g>
        </svg>
        
        



        
        
        <label  id="tempo"  style="float: left; margin-right: 0.2em" ><select id="tempovalue"  >
        <option value=""></option>
        <option value="30">Grave</option>
        <option value="42">Lento</option>
        <option value="47">Largo</option>
        <option value="60">Adagio</option>
        <option value="67">Adagietto</option>
        <option value="75">Andante</option>
        <option value="91">Moderato</option>
        <option value="104">Allegretto</option>
        <option value="120">Allegro</option>
        <option value="136">Vivace</option>
        <option value="170">Presto</option>
        <option value="180">Prestissimo</option>
      </select></label>
        
      <button   id="playallbutton" class="headerbutton" style="margin-right: 0.2em;"  onClick="playAll()" ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Play All</title><path fill="none" d="M0 0h24v24H0z"/><path d="M16.394 12L10 7.737v8.526L16.394 12zm2.982.416L8.777 19.482A.5.5 0 0 1 8 19.066V4.934a.5.5 0 0 1 .777-.416l10.599 7.066a.5.5 0 0 1 0 .832z"/></svg></button>
      <button  class="headerbutton"  id="stopplayingallbutton" style="margin-right: 0.2em; display: none" class="stopplayingbutton"  onClick="stopPlaying()" ><svg role="img"xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Stop Playing</title><path fill="none" d="M0 0h24v24H0z"/><path d="M7 7v10h10V7H7zM6 5h12a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1z"/></svg></button>
      <input type='hidden' id="playallvalue" value="" />
    </div>  
  </div> 
  
</div>


<div id="downloadselector"  class="overlay" style="float: left; width: 90%; position: fixed ; top:120px; left: 20px;" >
  <input id="downloadsonglist" style="float: left; font-size: 1.2em; font-weight: bold; margin-bottom: 1em;" type='button' onClick="download('songlist.meta.txt', $('#songlist').val())" value="Save" />
  <div style="float: left; margin-left: 1em;" >
    <h5 style="margin-top: 0px">Download</h5>
    <input id="downloadlongabc" style="" type='button' onClick="downloadLongAbc()" value="Tunebook ABC" />
    <input id="downloadshortabc" style="" type='button' onClick="downloadShortAbc()" value="Cheatsheet ABC" />
    <input   type='button' onClick="download('songtitles.txt', getTuneTitles())" value="Song Titles" />
    <input   type='button' onClick="download('searchtitles.txt', getSearchTexts())" value="Search Titles" />
  </div>
  <div style="float: left; margin-left: 1em;" >
    <h5 style="margin-top: 0px" >Copy</h5>
    <input id="copylongabc" style="" type='button'  value="Tunebook ABC" />
    <input id="copyshortabc" style="" type='button'  value="Cheatsheet ABC" />
    <input id="copysongtitles" style="" type='button'  value="Song Titles" />
    <input id="copysongtexts" style="" type='button'  value="Search Titles" />
  </div>
</div>

<div id="mastercontainer" >

  <div id="help" style="display: none;margin-top: 3em" >
    <div>This tool helps you to find, collect, print and memorise tunes. It includes features to
    <ul>
      <li>Search and import tunes from thesession.org.</li>
      <li>Edit tunes with immediate visual feedback and audio support.</li>
      <li>Generate a clickable index of all the tunes in a book</li>
      <li>Generate a cheatsheet showing the first 4 bars of all the tunes in the book.</li>
      <li>Print a paginated book including the index, cheatsheet and music.</li>
      <li>Listen to the tunes and set the tempo.</li>
      <li>Add tunes to a review list with a confidence score</li>
      <li>Review tunes, starting with the least confident, by playing them three times each and then increasing the confidence score.</li>
      <li>Once a tune has been played three times, it is excluded from review for 24 hours.</li>
      <li>In review, the tempo of playback is faster for tunes with high confidence.</li>
    </ul></div>
      <h3>FAQ</h3>
    <ul>
        <li><b>Something doesn't work right? [Submit bugs at github](https://github.com/syntithenai/abc2book/issues).</b></li>
        
        <li><b>Why do the songs in my list get bracketed information added eg "[ID:1308][S:6]after the battle of oram"</b></li>
        <li><b>I've gone through and refined my list to choose settings, how do I keep this information.</b></li>
        <li><b>Why </b></li>
    </ul>
    <br/><br/><br/>
    
    <div>Songs are sourced from <a target='sessionwin'  href="http://thesession.org" >thesession.org</a></div>
    <div>Music is rendered from ABC format using <a target='sessionwin'  href="https://www.abcjs.net/" >abcjs</a></div>
    
    <div>The software is released to use and modify freely on <a target='gitwin'  href="https://github.com/syntithenai/abc2book" >Github</a></div>
    <br/>
    <div>Copyleft Steve Ryan (<a target='mailwin'  href="mailto:syntithenai@gmail.com" >syntithenai@gmail.com</a>)</div>
  </div>  
  <div id="songlistmanager" style="display: none; margin-top: 3em"  >
    <div id="helptext" style="font-weight: bold;  margin-right: 2em">Type a list of tunes from <a target='sessionwin'  href="http://thesession.org" >thesession.org</a> and click <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="none" d="M0 0h24v24H0z"/><path d="M13 10h5l-6 6-6-6h5V3h2v7zm-9 9h16v-7h2v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-8h2v7z"/></svg></div>
    <div id="errors" style="display: none" ></div>
    <div id="songlistbutton" style="float: left; position: relative; clear both;" >
      <button id="generatebutton" style="float: left ; clear: both;  margin-right: 1em" type='button' onClick="generateMusic()"  ><svg  role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Load and generate music from list</title><path fill="none" d="M0 0h24v24H0z"/><path d="M13 10h5l-6 6-6-6h5V3h2v7zm-9 9h16v-7h2v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-8h2v7z"/></svg></button>
      <button id="stopbutton" style="display: none; float: left ;margin-right: 0.2em" type='button' onClick="setStopNow(true)"  ><svg role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Stop Loading</title><path fill="none" d="M0 0h24v24H0z"/><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-9.414l2.828-2.829 1.415 1.415L13.414 12l2.829 2.828-1.415 1.415L12 13.414l-2.828 2.829-1.415-1.415L10.586 12 7.757 9.172l1.415-1.415L12 10.586z"/></svg></button>
      <input id="stopbuttonvalue"  type='hidden' value="true" />
      
      <input type="file"  id="uploadbutton" class="headerbutton" value="Load File" />
      
<script>
  const fileSelector = document.getElementById('uploadbutton');
  fileSelector.addEventListener('change', (event) => {
    const fileList = event.target.files;
    //console.log('FILES',fileList);
    function readFile(){
        var file = document.getElementById("uploadbutton").files[0];
        var reader = new FileReader();
        reader.onloadend = function(){
          var lines = reader && reader.result ? reader.result.split("\n") : []
          if (confirm('Do you really want to replace your current tune book with this list of '+lines.length+' search items ?')) {
              $('#songlist').val(reader.result) 
              saveSongList()
              generateMusic()
          }
          //console.log("reader end",reader.result)
            //document.getElementById('profile-upload').style.backgroundImage = "url(" + reader.result + ")";        
        }
        if(file){
            reader.readAsText(file);
        }else{
        }
    }
    readFile()
  });
</script>
      
    </div>
    <div id="processingstatus" ></div>
    <textarea  style="clear: both; float: left; width: 100%" rows=10  id="songlist" onKeyUp="saveSongList()" ></textarea>
    
  </div>
  
  <div id="indexes" style="display: none; margin-left: 1em; margin-top: 3em">
    <h1>Tune Index</h1>
    <div id="index"   ></div>
    <p style='page-break-before: always'><br/></p>

    <h3 style="margin-top: 4em" >Index By Key Signature</h3>
    <div style="width: 100%; clear: both; padding-bottom: 2em; " id="indexbykey"   ></div>
    <p style='page-break-before: always'><br/></p>

    <h3 style="margin-top: 4em">Index By Tune Type</h3>
    <div style="width: 100%; clear: both; padding-bottom: 2em;" id="indexbytype"   ></div>
  </div>

  <span style="display: none;">
    <h1>Short</h1>
    <input id="reloadbutton" style="float: left ;margin-right: 2em" type='button' onClick="renderCheetsheetFromShortAbc();" value="Render" />
    <textarea rows='30' cols='60' id="shortabc"   ></textarea>
  </span>
  <span style="display: none;" >
    <h1>Long</h1>
     <input id="reloadbutton" style="float: left ;margin-right: 2em" type='button' onClick=" renderMusicFromLongAbc()" value="Render" />
    <textarea rows='30' cols='60'  id="longabc"   ></textarea>
  </span>

  <div style="display: none;"  id="testrendererwrap"   ><div style="display: none;"  id="testrenderer"   ></div></div>


  <p style='page-break-before: always'><br/></p>
  <div id="cheatsheet_music_container"  style="display: none" >
    <h3 style="margin-top: 1em">Cheat Sheet</h3>
    <div style="width: 100%; clear: both; padding-bottom: 2em; position: relative;" class="container music"  id="cheatsheet_music"   ></div>
  </div>

  <p style='page-break-before: always'></p>
  <div id="welcometext" style="margin-bottom: 1em; font-size: 0.9em"  >
  <h3 style="display: inline" >Learn session tunes here !</h3> 
  <span>Try one of our curated tunebooks <button style="font-size: 0.7em" onClick="selectSongList('begged borrowed and stolen')" >Begged Borrowed and Stolen</button> </span>
  <div style="margin-top:0.5em" >Or create your own book from a list of tunes <button style="font-size: 0.7em" id="welcomecreatenewbutton" >Create A Tunebook</button> or just <button style="font-size: 0.7em" id="welcomeaddtunebutton" >Add a Tune</button></div>
  </div>
  
  <button style="float: right;" id="addtunebutton" >
  <svg role="image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><title>Add a Tune</title><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></svg></button>
  
  <div style="width: 100%; clear: both; padding-bottom: 2em;" class="container music"  id="music"   ></div>
  <br/>
  <br/>

</div>

<script src="abc2svg.js"></script>
<script src="https://code.jquery.com/jquery-3.1.0.js"></script>
<script src="abc2book.js"></script>
<script src="abc2book.persist.js"></script>
<script src="abc2book.utils.js"></script>
<script src="abc2book.audio.js"></script>
<script src="abc2book.tunelists.js"></script>
<script src="abc2book.review.js"></script>

<script src="abc2book.indexes.js"></script>
<script src="speakClient.js"></script>
<script src="NoSleep.min.js"></script>
<!--
<script src="qrcode.min.js"></script>
-->

<script >


$(document).ready(function() {
  loadSongList()
  $("#stopbutton").show()
  //$('#songlistmanager').hide()
  //$("#helpbutton").hide()
  //$("#reviewbuttons").hide()
  generateAndRender()
  // hide overlays on bg click
  $('body').click(function() {
    $('.overlay').hide()
  })
  $('#waiting').hide()
  renderSonglistPicker()
  $('.stopplayingbutton').hide()
  $('#stopbutton').hide()
  $('#downloadbutton').click(function(e) {
    e.stopPropagation()
    $('#downloadselector').show()
  })
  $('#reviewbutton').click(function(e) {
    review()
  })
  $('#reviewlistbutton').click(function(e) {
    e.stopPropagation()
    showReviewList()
  })
  $('#reviewsearchinput').click(function(e) {
    e.stopPropagation()
    //showReviewList()
  })
  $('#moremenubutton').click(function(e) {
    e.stopPropagation()
    $("#moremenu").show()
  })  
  $('#editsonglistbutton').click(function(e) {
    showContentSection('songlistmanager')
    $('#songlistmanager').show()
  })  
  $('#welcomecreatenewbutton').click(function(e) {
    showContentSection('songlistmanager')
    $('#songlistmanager').show()
  }) 
  $('#songlistpickerbutton').click(function(e) {
    //console.log('show picker')
    e.stopPropagation()
    $('#songlistpicker').show()
  }) 
   $('#welcomeaddtunebutton').click(function() {
     var searchText = prompt('What is the name of the tune?')
     addNewTuneToStartOfList(searchText)
   })
   $('#addtunebutton').click(function() {
     var searchText = prompt('What is the name of the tune?')
     addNewTuneToStartOfList(searchText)
   })
 
   
  var reviewSearchClickTimeout = null
  $('#reviewsearchinput').keyup(function(e) {
    if (reviewSearchClickTimeout) clearTimeout(reviewSearchClickTimeout)
    reviewSearchClickTimeout = setTimeout(function() {
      renderReviewList()
    },300)
    //showReviewList()
  })
  bindCopy($('#copyshortabc'),function() {
      return $('#shortabc').val()
  })
  bindCopy($('#copylongabc'),function() {
      return $('#longabc').val()
  })
  bindCopy($('#copysongtitles'),function() {
      return getSongTitles()
  })
  bindCopy($('#copysongtexts'),function() {
      return getSearchTexts()
  })
  // no sleep
  document.addEventListener('click', function enableNoSleep() {
  document.removeEventListener('click', enableNoSleep, false);
    var ns = new window.NoSleep()
    ns.enable();
  }, false);  
 
  //$('#songlist').before()
  //$('#songlistpicker').hide()
  //generateAbcFromTunes()
  ////loadShortAbc()
  ////loadLongAbc()
  //if ($('#shortabc').val().length > 0) {
    //renderCheetsheetFromShortAbc()
    //renderMusicFromLongAbc()
  //}
  //loadIndexes()
  //generateMusic()  
})

</script>
</body>
</html>
